"use strict";(self.webpackChunkbmg_web_app=self.webpackChunkbmg_web_app||[]).push([[168],{7562:function(e,t,n){var r=n(1413),a=n(2791),i=n(6871),o=n(374),l=n(184);t.Z=function(e,t){return function(n){var s=(0,a.useContext)(o.V),c=(0,i.s0)(),u=s.userToken;return(0,a.useEffect)((function(){"undefined"!==typeof window&&(u?-1===(null===t||void 0===t?void 0:t.indexOf(s.userRole))&&c("/403",{replace:!0}):c("/auth",{replace:!0}))}),[u,s.userRole,c]),"undefined"!==typeof window?s.isLoading?(console.log("loading from with auth"),null):(0,l.jsx)(e,(0,r.Z)({},n)):null}}},5168:function(e,t,n){n.r(t),n.d(t,{default:function(){return D}});var r=n(9439),a=n(2791),i=n(6871),o=n(8735),l=n(8164),s=n(6106),c=n(7309),u=n(7496),d=n(5696),f=n(7562),m=n(2567),h=n(3853),p=n(4971),g=n(2393),x=n(6208),Z=n(5095),j=n.n(Z),C=n(3433),v=n(5303),y=n(3695),w=n(4980),b=n(1333),S=n(184),I=v.Z.Option,k=function(e){var t=e.visible,n=e.onCancel,i=e.setUpdateData,o=e.data,l=e.updating,s=(0,x.KQ)("area"),d=s.data,f=s.loading,p=(0,a.useState)(""),Z=(0,r.Z)(p,2),j=Z[0],v=Z[1],k=(0,a.useState)(""),O=(0,r.Z)(k,2),_=O[0],D=O[1],P=(0,a.useState)(""),F=(0,r.Z)(P,2),L=F[0],M=F[1],N=(0,a.useState)(""),R=(0,r.Z)(N,2),T=R[0],q=R[1],E=(0,a.useMemo)((function(){return L?(0,C.Z)(d).filter((function(e){return e.id===L}))[0].name:""}),[d,L]),U=(0,a.useMemo)((function(){return d}),[d]),A=function(){v(""),D(""),M(""),q(""),B.resetFields()},K=u.Z.useForm(),B=(0,r.Z)(K,1)[0],Q=(0,a.useState)({url:"",data:{},trigger:0}),V=(0,r.Z)(Q,2),Y=V[0],$=V[1],X=(0,a.useState)({url:"",data:{},trigger:0}),z=(0,r.Z)(X,2),W=z[0],G=z[1],H=(0,x.u5)(Y.url,Y.data,Y.trigger),J=H.onSuccess,ee=H.loading,te=(0,x.Fc)(W.url,W.data,W.trigger),ne=te.onSuccess,re=te.loading;return(0,a.useEffect)((function(){J.includes("success")&&(y.ZP.success("Berhasil Create Area ".concat(L)),A(),n(),i(Date.now())),ne.includes("success")&&(y.ZP.success("Berhasil Update Area ".concat(L)),A(),n(),i(Date.now()))}),[J,ne]),(0,a.useEffect)((function(){o.id&&l?(v(o.id),D(o.name),M(o.area_id),q(o.status),B.setFieldsValue({clusterName:o.name,areaId:o.area_id,status:o.status})):A()}),[o,l]),(0,S.jsx)(w.Z,{title:l?"Update Cluster":"Create Cluster",visible:t,onCancel:n,footer:!1,children:(0,S.jsxs)(u.Z,{form:B,name:"createsite",autoComplete:"off",children:[(0,S.jsx)(m.yt,{label:"Cluster Name",requiredLabel:!0,name:"clusterName",required:!0,message:"please input cluster name!",placeholder:"input cluster name",onChange:function(e){return(0,g.IY)(e,D)}}),(0,S.jsx)(m.ih,{name:"areaId",label:"Area",requiredLabel:!0,required:!0,message:"Please select area!",placeholder:"select area",allowClear:!0,showSearch:!0,optionFilterProp:"children",filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},onChange:function(e){return M(e)},loading:f,disabled:f,children:U.map((function(e){return(0,S.jsx)(I,{value:e.id,children:"[".concat(e.id,"] ").concat(e.name)},e.id)}))}),(0,S.jsxs)(m.ih,{name:"status",label:"Status",requiredLabel:!0,required:!0,message:"Please select status!",placeholder:"select status",onChange:function(e){return q(e)},children:[(0,S.jsx)(I,{value:1,children:"Active"}),(0,S.jsx)(I,{value:0,children:"Inactive"})]}),(0,S.jsx)(b.Z,{}),(0,S.jsx)(m.Wy,{children:(0,S.jsx)(u.Z.Item,{children:l?(0,S.jsx)(c.Z,{type:"primary",shape:"round",icon:(0,S.jsx)(h.t$,{style:{marginRight:"6px"}}),onClick:function(){if(!j||!_||!L||!E||""===T)return y.ZP.warn("Form tidak boleh kosong"),null;var e={area_name:E,area_id:L,name:_,status:T};console.log("data update: ",e),G({url:"area/edit/cluster?cluster_id=".concat(j),data:e,trigger:(new Date).getTime()})},loading:re,htmlType:"submit",children:"Update Cluster"}):(0,S.jsx)(c.Z,{type:"primary",shape:"round",icon:(0,S.jsx)(h.t$,{style:{marginRight:"6px"}}),onClick:function(){if(!_||!L||!E||""===T)return y.ZP.warn("Form tidak boleh kosong"),null;var e={area_name:E,area_id:L,name:_,status:T};console.log("data post: ",e),$({url:"area/create/cluster",data:e,trigger:(new Date).getTime()})},loading:ee,htmlType:"submit",children:"Create Cluster"})})})]})})},O=o.Z.Title,_=o.Z.Text,D=(0,f.Z)((function(){var e=(0,a.useState)(0),t=(0,r.Z)(e,2),n=t[0],o=t[1],f=(0,x.KQ)("area/cluster",n),Z=f.data,C=f.loading,v=(0,a.useState)(""),y=(0,r.Z)(v,2),w=y[0],b=y[1],I=(0,a.useState)({}),D=(0,r.Z)(I,2),P=D[0],F=D[1],L=(0,a.useState)(!1),M=(0,r.Z)(L,2),N=M[0],R=M[1],T=(0,a.useMemo)((function(){return 0===Z.length?[]:Z.filter((function(e){var t;return null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(null===w||void 0===w?void 0:w.toLowerCase())}))}),[Z,w]),q=(0,x.qY)(),E=q.isOpen,U=q.onOpen,A=q.onClose,K=(0,i.s0)(),B=(0,a.useRef)(j()((function(e){return b(e)}),1e3)).current,Q=function(e){R(!0),F(e),U()},V=[{title:"#",dataIndex:"id",render:function(e,t){return(0,S.jsx)(_,{strong:!0,style:{cursor:"pointer"},onClick:function(){return Q(t)},children:e})},width:70},{title:"Name",dataIndex:"name",render:function(e,t){return(0,S.jsx)(_,{strong:!0,style:{cursor:"pointer"},onClick:function(){return Q(t)},children:e})}},{title:"Area",dataIndex:"area_name"},{title:"Status",dataIndex:"status"},{title:"Created",dataIndex:"created_at",render:function(e){return(0,g.cX)(e)}}];return(0,S.jsxs)("div",{children:[(0,S.jsxs)(l.Z,{style:{margin:"16px 0"},children:[(0,S.jsx)(l.Z.Item,{style:{cursor:"pointer"},onClick:function(){return K("/user-management")},children:"User Management"}),(0,S.jsx)(l.Z.Item,{style:{cursor:"pointer"},onClick:function(){return K("/user-management/area")},children:"Area"}),(0,S.jsx)(l.Z.Item,{children:"Cluster"})]}),(0,S.jsx)(k,{visible:E,onCancel:A,setUpdateData:o,data:P,updating:N}),(0,S.jsx)("div",{children:(0,S.jsxs)(m.Zb,{children:[(0,S.jsx)(O,{level:3,type:"secondary",style:{marginRight:20,marginBottom:30},children:"Cluster"}),(0,S.jsxs)(s.Z,{gutter:[16,10],children:[(0,S.jsx)(m.lr,{children:(0,S.jsx)(c.Z,{shape:"round",icon:(0,S.jsx)(h.xVi,{style:{marginRight:6}}),onClick:function(){R(!1),U()},children:"New Cluster"})}),(0,S.jsx)(m.r$,{children:(0,S.jsx)(u.Z,{name:"searchCluster",autoComplete:"off",children:(0,S.jsx)(m.yt,{name:"search",prefix:(0,S.jsx)(h.jRj,{color:p.wm}),allowClear:!0,placeholder:"serach cluster",value:w,onChange:function(e){return B(e.target.value)}})})})]}),(0,S.jsx)("div",{style:{marginTop:"20px"},children:(0,S.jsx)(d.Z,{columns:V,dataSource:T,rowKey:function(e){return e.id},loading:C,scroll:{y:500}})})]})})]})}))},2393:function(e,t,n){n.d(t,{QD:function(){return a},cX:function(){return i},IY:function(){return o},U6:function(){return l}});n(2426);var r=n(5095),a=function(e){return new Intl.NumberFormat("id-ID").format(e)},i=function(e){return new Date(e).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric"})},o=n.n(r)()((function(e,t){return t(e.target.value)}),500),l=function(e){return"number"===typeof e?e>=1e6?"".concat((e/1e6).toFixed(2)," MM"):e>=1e3?"".concat((e/1e3).toFixed(2)," KM"):"".concat(e," Meter"):e}},1333:function(e,t,n){var r=n(7462),a=n(4942),i=n(2791),o=n(1694),l=n.n(o),s=n(9077),c=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};t.Z=function(e){return i.createElement(s.C,null,(function(t){var n,o=t.getPrefixCls,s=t.direction,u=e.prefixCls,d=e.type,f=void 0===d?"horizontal":d,m=e.orientation,h=void 0===m?"center":m,p=e.orientationMargin,g=e.className,x=e.children,Z=e.dashed,j=e.plain,C=c(e,["prefixCls","type","orientation","orientationMargin","className","children","dashed","plain"]),v=o("divider",u),y=h.length>0?"-".concat(h):h,w=!!x,b="left"===h&&null!=p,S="right"===h&&null!=p,I=l()(v,"".concat(v,"-").concat(f),(n={},(0,a.Z)(n,"".concat(v,"-with-text"),w),(0,a.Z)(n,"".concat(v,"-with-text").concat(y),w),(0,a.Z)(n,"".concat(v,"-dashed"),!!Z),(0,a.Z)(n,"".concat(v,"-plain"),!!j),(0,a.Z)(n,"".concat(v,"-rtl"),"rtl"===s),(0,a.Z)(n,"".concat(v,"-no-default-orientation-margin-left"),b),(0,a.Z)(n,"".concat(v,"-no-default-orientation-margin-right"),S),n),g),k=(0,r.Z)((0,r.Z)({},b&&{marginLeft:p}),S&&{marginRight:p});return i.createElement("div",(0,r.Z)({className:I},C,{role:"separator"}),x&&i.createElement("span",{className:"".concat(v,"-inner-text"),style:k},x))}))}},6106:function(e,t,n){var r=n(7545);t.Z=r.Z}}]);
//# sourceMappingURL=168.93c40d94.chunk.js.map