"use strict";(self.webpackChunkbmg_web_app=self.webpackChunkbmg_web_app||[]).push([[645],{7562:function(e,n,t){var r=t(1413),i=t(2791),a=t(6871),o=t(374),s=t(184);n.Z=function(e,n){return function(t){var l=(0,i.useContext)(o.V),u=(0,a.s0)(),d=l.userToken;return(0,i.useEffect)((function(){"undefined"!==typeof window&&(d?-1===(null===n||void 0===n?void 0:n.indexOf(l.userRole))&&u("/403",{replace:!0}):u("/auth",{replace:!0}))}),[d,l.userRole,u]),"undefined"!==typeof window?l.isLoading?(console.log("loading from with auth"),null):(0,s.jsx)(e,(0,r.Z)({},t)):null}}},4645:function(e,n,t){t.r(n),t.d(n,{default:function(){return Y}});var r=t(9439),i=t(2791),a=t(6871),o=t(8735),s=t(8164),l=t(6106),u=t(3099),d=t(7309),c=t(7496),p=t(5696),h=t(7562),m=t(2567),f=t(3853),g=t(4971),x=t(6208),j=t(5095),b=t.n(j),v=t(5303),y=t(3695),C=t(4980),Z=t(8361),w=t(1333),_=t(2393),S=t(2426),D=t.n(S),L=t(184),q=v.Z.Option,I=function(e){var n=e.visible,t=e.onCancel,a=e.setUpdateData,o=e.state,s=e.updating,l=(0,i.useState)(""),u=(0,r.Z)(l,2),p=u[0],h=u[1],g=(0,x.KQ)(p),j=g.data,b=g.loading,v=(0,x.KQ)("employee"),S=v.data,I=v.loading,k=(0,x.KQ)("employee/division/list"),M=k.data,Y=k.loading,E=(0,x.KQ)("area/cluster"),P=E.data,F=E.loading,O=(0,x.KQ)("employee/religion/list"),R=O.data,T=O.loading,U=(0,i.useState)(""),z=(0,r.Z)(U,2),K=z[0],Q=z[1],N=(0,i.useState)(""),A=(0,r.Z)(N,2),B=A[0],J=A[1],V=(0,i.useState)(""),$=(0,r.Z)(V,2),G=$[0],W=$[1],X=(0,i.useState)(""),H=(0,r.Z)(X,2),ee=H[0],ne=H[1],te=(0,i.useState)(""),re=(0,r.Z)(te,2),ie=re[0],ae=re[1],oe=(0,i.useState)(""),se=(0,r.Z)(oe,2),le=se[0],ue=se[1],de=(0,i.useState)(""),ce=(0,r.Z)(de,2),pe=ce[0],he=ce[1],me=(0,i.useState)(""),fe=(0,r.Z)(me,2),ge=fe[0],xe=fe[1],je=(0,i.useState)(""),be=(0,r.Z)(je,2),ve=be[0],ye=be[1],Ce=(0,i.useState)(""),Ze=(0,r.Z)(Ce,2),we=Ze[0],_e=Ze[1],Se=(0,i.useState)(""),De=(0,r.Z)(Se,2),Le=De[0],qe=De[1],Ie=(0,i.useState)(""),ke=(0,r.Z)(Ie,2),Me=ke[0],Ye=ke[1],Ee=(0,i.useState)(""),Pe=(0,r.Z)(Ee,2),Fe=Pe[0],Oe=Pe[1],Re=(0,i.useState)(""),Te=(0,r.Z)(Re,2),Ue=Te[0],ze=Te[1],Ke=function(){h(""),Q(""),J(""),W(""),ne(""),ae(""),ue(""),he(""),xe(""),ye(""),_e(""),qe(""),Ye(""),Oe(""),ze(""),Ne.resetFields()},Qe=c.Z.useForm(),Ne=(0,r.Z)(Qe,1)[0],Ae=(0,i.useMemo)((function(){return p&&0!==j.length?j[0]:{}}),[j,p]),Be=(0,i.useMemo)((function(){return S}),[S]),Je=(0,i.useMemo)((function(){return M}),[M]),Ve=(0,i.useMemo)((function(){return P}),[P]),$e=(0,i.useMemo)((function(){return R}),[R]),Ge=(0,i.useState)({url:"",data:{},trigger:0}),We=(0,r.Z)(Ge,2),Xe=We[0],He=We[1],en=(0,i.useState)({url:"",data:{},trigger:0}),nn=(0,r.Z)(en,2),tn=nn[0],rn=nn[1],an=(0,x.u5)(Xe.url,Xe.data,Xe.trigger),on=an.onSuccess,sn=an.loading,ln=(0,x.Fc)(tn.url,tn.data,tn.trigger),un=ln.onSuccess,dn=ln.loading;return(0,i.useEffect)((function(){on.includes("success")&&(y.ZP.success("Berhasil Create Employee ".concat(B)),Ke(),t(),a(Date.now())),un.includes("success")&&(y.ZP.success("Berhasil Update Employee ".concat(B)),Ke(),t(),a(Date.now()))}),[on,un]),(0,i.useEffect)((function(){o.id&&s?(h("employee/show?employe_id=".concat(o.id)),Q(o.id),J(Ae.emp_name),W(Ae.emp_birth_date),ne(o.refference_no),ae(Ae.division_id),ue(""),he(Ae.mobile_phone),xe(""),ye(""),_e(Ae.address),qe(""),Ye(Ae.join_date),Oe(Ae.resign_date),ze(Ae.supervisor_id),Ne.setFieldsValue({empId:o.id,name:Ae.emp_name,birthDate:Ae.emp_birth_date?D()(Ae.emp_birth_date):"",reference:o.refference_no,division:Ae.division_id,cluster:"",phone:Ae.mobile_phone,gender:"",religion:"",address:Ae.address,status:"",joinDate:Ae.join_date?D()(Ae.join_date):"",resignDate:Ae.resign_date?D()(Ae.resign_date):"",supervisor:Ae.supervisor_id})):Ke()}),[Ae,s]),(0,L.jsx)(C.Z,{title:s?"Update Employee":"Create Employee",visible:n,onCancel:t,footer:!1,width:1e3,children:(0,L.jsx)(Z.Z,{loading:b,active:!0,children:(0,L.jsxs)(c.Z,{form:Ne,name:"createemployee",autoComplete:"off",children:[(0,L.jsxs)(m.Ej,{children:[(0,L.jsxs)(m.b0,{children:[(0,L.jsx)(m.yt,{label:"Name",requiredLabel:!0,name:"name",required:!0,message:"please input name!",placeholder:"input name",onChange:function(e){return(0,_.IY)(e,J)}}),(0,L.jsx)(m.I0,{label:"Date of Birth",name:"birthDate",required:!0,requiredLabel:!0,message:"please input date of birth!",onChange:function(e,n){return W(n)},format:"YYYY-MM-DD"}),(0,L.jsx)(m.yt,{label:"Reference",requiredLabel:!0,name:"reference",required:!0,message:"please input reference!",placeholder:"input reference",onChange:function(e){return(0,_.IY)(e,ne)}}),(0,L.jsx)(m.ih,{name:"division",label:"Division",requiredLabel:!0,required:!0,message:"Please select division!",placeholder:"select division",allowClear:!0,showSearch:!0,optionFilterProp:"children",filterOption:function(e,n){return n.children.toLowerCase().indexOf(e.toLowerCase())>=0},onChange:function(e){return ae(e)},loading:Y,disabled:Y,children:Je.map((function(e){return(0,L.jsx)(q,{value:e.id,children:"[".concat(e.id,"] ").concat(e.name)},e.id)}))}),(0,L.jsx)(m.ih,{name:"cluster",label:"Cluster",requiredLabel:!0,required:!0,message:"Please select cluster!",placeholder:"select cluster",allowClear:!0,showSearch:!0,optionFilterProp:"children",filterOption:function(e,n){return n.children.toLowerCase().indexOf(e.toLowerCase())>=0},onChange:function(e){return ue(e)},loading:F,disabled:F,children:Ve.map((function(e){return(0,L.jsx)(q,{value:e.id,children:"[".concat(e.id,"] ").concat(e.name)},e.id)}))}),(0,L.jsx)(m.yt,{label:"Phone Number",requiredLabel:!0,name:"phone",required:!0,message:"please input phone number!",placeholder:"input phone number",onChange:function(e){return(0,_.IY)(e,he)}}),(0,L.jsxs)(m.ih,{name:"gender",label:"Gender",requiredLabel:!0,required:!0,message:"Please select gender!",placeholder:"select gender",onChange:function(e){return xe(e)},children:[(0,L.jsx)(q,{value:1,children:"MALE"}),(0,L.jsx)(q,{value:2,children:"FEMALE"})]})]}),(0,L.jsxs)(m.b0,{children:[(0,L.jsx)(m.ih,{name:"religion",label:"Religion",requiredLabel:!0,required:!0,message:"Please select religion!",placeholder:"select religion",allowClear:!0,showSearch:!0,optionFilterProp:"children",filterOption:function(e,n){return n.children.toLowerCase().indexOf(e.toLowerCase())>=0},onChange:function(e){return ye(e)},loading:T,disabled:T,children:$e.map((function(e){return(0,L.jsx)(q,{value:e.id,children:e.name},e.id)}))}),(0,L.jsx)(m.yt,{label:"Address",requiredLabel:!0,name:"address",required:!0,message:"please input address!",placeholder:"input address",onChange:function(e){return(0,_.IY)(e,_e)}}),(0,L.jsxs)(m.ih,{name:"status",label:"Status",requiredLabel:!0,required:!0,message:"Please select status!",placeholder:"select status",onChange:function(e){return qe(e)},children:[(0,L.jsx)(q,{value:1,children:"Active"}),(0,L.jsx)(q,{value:0,children:"Inactive"})]}),(0,L.jsx)(m.I0,{label:"Join Date",name:"joinDate",required:!0,requiredLabel:!0,message:"please input join date!",onChange:function(e,n){return Ye(n)},format:"YYYY-MM-DD"}),s&&(0,L.jsx)(m.I0,{label:"Resign Date",name:"resignDate",onChange:function(e,n){return Oe(n)},format:"YYYY-MM-DD"}),(0,L.jsx)(m.ih,{name:"supervisor",label:"Supervisor",requiredLabel:!0,required:!0,message:"Please select supervisor!",placeholder:"select supervisor",allowClear:!0,showSearch:!0,optionFilterProp:"children",filterOption:function(e,n){return n.children.toLowerCase().indexOf(e.toLowerCase())>=0},onChange:function(e){return ze(e)},loading:I,disabled:I,children:Be.map((function(e){return(0,L.jsx)(q,{value:e.id,children:"[".concat(e.id,"] ").concat(e.name)},e.id)}))})]})]}),(0,L.jsx)(w.Z,{}),(0,L.jsx)(m.Wy,{children:(0,L.jsx)(c.Z.Item,{children:s?(0,L.jsx)(d.Z,{type:"primary",shape:"round",icon:(0,L.jsx)(f.t$,{style:{marginRight:"6px"}}),onClick:function(){if(!K||!B||!G||!ee||!ie||!le||!pe||!ge||!ve||!we||""===Le||!Me||!Ue)return y.ZP.warn("Form tidak boleh kosong"),null;var e={name:B,birthday_date:G,refference_no:ee,division_id:ie,cluster_id:le,mobile_phone:pe,gender:ge,religion:ve,address:we,status:Le,join_date:Me,resign_date:Fe,supervisor_id:Ue};console.log("data update: ",e),rn({url:"employee/edit?employe_id=".concat(K),data:e,trigger:(new Date).getTime()})},loading:dn,htmlType:"submit",children:"Update Employee"}):(0,L.jsx)(d.Z,{type:"primary",shape:"round",icon:(0,L.jsx)(f.t$,{style:{marginRight:"6px"}}),onClick:function(){if(!B||!G||!ee||!ie||!le||!pe||!ge||!ve||!we||""===Le||!Me||!Ue)return y.ZP.warn("Form tidak boleh kosong"),null;var e={name:B,birthday_date:G,refference_no:ee,division_id:ie,cluster_id:le,mobile_phone:pe,gender:ge,religion:ve,address:we,status:Le,join_date:Me,supervisor_id:Ue};console.log("data post: ",e),He({url:"employee/create",data:e,trigger:(new Date).getTime()})},loading:sn,htmlType:"submit",children:"Create Employee"})})})]})})})},k=o.Z.Title,M=o.Z.Text,Y=(0,h.Z)((function(){var e=(0,i.useState)(0),n=(0,r.Z)(e,2),t=n[0],o=n[1],h=(0,i.useState)(1),j=(0,r.Z)(h,2),v=j[0],y=j[1],C=(0,i.useState)(20),Z=(0,r.Z)(C,2),w=Z[0],_=Z[1],S=(0,x.cF)("employee?page=".concat(v,"&perpage=").concat(w),t),D=S.data,q=S.pagination,Y=S.loading,E=(0,i.useState)(""),P=(0,r.Z)(E,2),F=P[0],O=P[1],R=(0,i.useState)({}),T=(0,r.Z)(R,2),U=T[0],z=T[1],K=(0,i.useState)(!1),Q=(0,r.Z)(K,2),N=Q[0],A=Q[1],B=(0,i.useMemo)((function(){return 0===D.length?[]:D.filter((function(e){var n;return null===(n=e.name)||void 0===n?void 0:n.toLowerCase().includes(null===F||void 0===F?void 0:F.toLowerCase())}))}),[D,F]),J=(0,x.qY)(),V=J.isOpen,$=J.onOpen,G=J.onClose,W=(0,a.s0)(),X=(0,i.useRef)(b()((function(e){return O(e)}),1e3)).current,H=function(e){A(!0),z(e),$()},ee=[{title:"#",dataIndex:"id",render:function(e,n){return(0,L.jsx)(M,{strong:!0,style:{cursor:"pointer"},onClick:function(){return H(n)},children:e})},width:70},{title:"Name",dataIndex:"name",render:function(e,n){return(0,L.jsx)(M,{strong:!0,style:{cursor:"pointer"},onClick:function(){return H(n)},children:e})}},{title:"Ref. No.",dataIndex:"refference_no"},{title:"Division",dataIndex:"division"},{title:"Gender",dataIndex:"gender"},{title:"Status",dataIndex:"status"}];return(0,L.jsxs)("div",{children:[(0,L.jsxs)(s.Z,{style:{margin:"16px 0"},children:[(0,L.jsx)(s.Z.Item,{style:{cursor:"pointer"},onClick:function(){return W("/user-management")},children:"User Management"}),(0,L.jsx)(s.Z.Item,{children:"Employee"})]}),(0,L.jsx)(I,{visible:V,onCancel:G,setUpdateData:o,state:U,updating:N}),(0,L.jsx)("div",{children:(0,L.jsxs)(m.Zb,{children:[(0,L.jsx)(k,{level:3,type:"secondary",style:{marginRight:20,marginBottom:30},children:"Employee"}),(0,L.jsxs)(l.Z,{gutter:[16,10],children:[(0,L.jsx)(m.lr,{children:(0,L.jsxs)(u.Z,{wrap:!0,children:[(0,L.jsx)(d.Z,{shape:"round",icon:(0,L.jsx)(f.xVi,{style:{marginRight:6}}),onClick:function(){A(!1),$()},children:"New Employee"}),(0,L.jsx)(m.hU,{icon:(0,L.jsx)(f.Yjd,{size:20}),toolTip:"Upload data employee",onClick:function(){return W("/user-management/employee/upload")}}),(0,L.jsx)("a",{href:"/uploademployee.csv",target:"_blank",rel:"noreferrer",children:(0,L.jsx)(m.hU,{icon:(0,L.jsx)(f._hL,{color:g.zP,size:20}),style:{backgroundColor:g.RJ},toolTip:"Download template employee"})})]})}),(0,L.jsx)(m.r$,{children:(0,L.jsx)(c.Z,{name:"searchEmployee",autoComplete:"off",children:(0,L.jsx)(m.yt,{name:"search",prefix:(0,L.jsx)(f.jRj,{color:g.wm}),allowClear:!0,placeholder:"serach employee",value:F,onChange:function(e){return X(e.target.value)}})})})]}),(0,L.jsx)("div",{style:{marginTop:"20px"},children:(0,L.jsx)(p.Z,{columns:ee,dataSource:B,rowKey:function(e){return e.id},loading:Y,scroll:{y:500},pagination:{total:q.total_data,showTotal:function(e,n){return"".concat(n[0],"-").concat(n[1]," of ").concat(e," items")},showQuickJumper:!0,defaultCurrent:1,onChange:function(e){return y(e)},showSizeChanger:!0,onShowSizeChange:function(e,n){return _(n)},defaultPageSize:w,pageSizeOptions:[20,60,100,140]}})})]})})]})}))},2393:function(e,n,t){t.d(n,{QD:function(){return i},cX:function(){return a},IY:function(){return o},U6:function(){return s}});t(2426);var r=t(5095),i=function(e){return new Intl.NumberFormat("id-ID").format(e)},a=function(e){return new Date(e).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric"})},o=t.n(r)()((function(e,n){return n(e.target.value)}),500),s=function(e){return"number"===typeof e?e>=1e6?"".concat((e/1e6).toFixed(2)," MM"):e>=1e3?"".concat((e/1e3).toFixed(2)," KM"):"".concat(e," Meter"):e}}}]);
//# sourceMappingURL=645.100b3306.chunk.js.map